msa={};msa.Vowels=function(d,a,e,c,b){this.magic="5SnM";this.divName=this.magic+"vowelsdiv";this.$=d;this.RID=a;this.sessionId=e;this.browserAgent=navigator.userAgent.toLowerCase();this.imageCounter=0;this.cdnSSLDomain=c;this.totalDomainList=[];if(this.cdnSSLDomain!==""){this.totalDomainList.push(this.cdnSSLDomain)}this.originalFile="/images/G/01/msa/vowels/metrics";this.originalFileExt="jpg"};msa.Vowels.prototype.sendBeacon=function(b,a){b.s=document.domain;b.u=window.location.pathname;b.sy=a;b.tz=this.browserAgent;if(typeof(window.ue)!=="undefined"&&typeof(window.ue.furl)!=="undefined"){new Image().src=this.generateUrl(b)}};msa.Vowels.prototype.isMSADomain=function(a){var b=/^https?:\/\/.*\.(images|ssl-images|media)-amazon\.com/i;return b.test(a)};msa.Vowels.prototype.collectResourceTiming=function(b){if(window.performance===undefined||(typeof window.performance.getEntriesByType!=="function")){return}var f=window.performance.getEntriesByType("resource");if(f===undefined||f.length<=0){return}var c,e,g;var a=0;var d=0;for(c=0;c<f.length;c++){e=f[c];if(!this.isMSADomain(e.name)){continue}g={};g.src=e.name;if(e.domainLookupEnd>0&&e.domainLookupStart>0){g.dns=Math.round(e.domainLookupEnd-e.domainLookupStart)}if(e.responseEnd>0&&e.startTime>0){g.dur=Math.round(e.responseEnd-e.startTime);if(g.dur>100){if(e.transferSize>0){g.siz=e.transferSize}if(e.connectEnd>0&&e.connectStart>0){g.tcp=Math.round(e.connectEnd-e.connectStart)}if(e.responseStart>0&&e.requestStart>0){g.ttf=Math.round(e.responseStart-e.requestStart)}if(e.responseEnd>0&&e.responseStart>0){g.con=Math.round(e.responseEnd-e.responseStart)}}}if(g.dns>0){this.sendBeacon(g,b)}else{if(g.ttf>0&&a<3){this.sendBeacon(g,b);a++}else{if(g.dur>100&&d<3){this.sendBeacon(g,b);d++}}}}};msa.Vowels.prototype.getNextId=function(){var a=this.magic+this.imageCounter;this.imageCounter+=1;return a};msa.Vowels.prototype.sendToCLOG=function(c,b,a){var d={};d.src=c;d.l=(new Date()).getTime()-b;this.sendBeacon(d,a)};msa.Vowels.prototype.generateUrl=function(d){var a="//"+window.ue.furl+"/1/msa-vowels/1/OP/?";var b;var c;for(b in d){if(d.hasOwnProperty(b)){c=d[b];a=a+window.escape(b);a=a+"=";a=a+window.escape(c);a=a+"&"}}return a};msa.Vowels.prototype.addImageEventToDOM=function(f,e,a,i){var c=this.getNextId();var g=f+"://"+e+a;var h=this;var b=(new Date()).getTime();var d=new Image();d.onload=function(){h.sendToCLOG(this.src,b,i)};d.id=c;d.domain=e;d.src=g;this.$("#"+this.divName).append(d)};msa.Vowels.prototype.attachTimeToName=function(c,d){var b=(new Date()).getTime();var a=c+"."+d+"?time="+b+"&r="+window.escape(this.RID);return a};msa.Vowels.prototype.attachSTIDToName=function(b,c){var d="STID"+this.sessionId+"-"+(new Date()).getTime();var a=b+"._"+d+"_."+c;return a};msa.Vowels.prototype.start=function(){try{for(var b=0;b<this.totalDomainList.length;b+=1){var f=this.totalDomainList[b];var g=this;var a="https://"+f+g.attachTimeToName(g.originalFile,g.originalFileExt);var e=new XMLHttpRequest();e.open("GET",a);var c=(new Date()).getTime();e.send();e.onreadystatechange=function(){try{if(this.readyState===4&&this.status===200){var i="u";if(this.getAllResponseHeaders&&typeof this.getAllResponseHeaders==="function"){var m=this.getAllResponseHeaders();var l=m.trim().split(/[\r\n]+/);var j={};l.forEach(function(n){var p=n.split(": ");var q=p.shift().toLowerCase();var o=p.join(": ").toLowerCase();j[q]=o});var h=j["x-cache"];if(h){if(h.indexOf("cloudfront")>=0){i="c"}else{if(h.indexOf("akamai")>=0){i="a"}}}}g.sendToCLOG(a,c,i);g.addImageEventToDOM("https",f,g.attachSTIDToName(g.originalFile,g.originalFileExt),i);g.collectResourceTiming(i)}}catch(k){}}}}catch(d){}};msa.Vowels.prototype.initializeAndStart=function(){if(location&&location.href){var a=this;a.$("body").ready(function(){var b=a.$("#"+a.divName);if(b.length){a.$("body").append(b)}else{a.$("body").append("<div style='font-size:0px;height:0px;width:0px;overflow:hidden;visibility:hidden;' id='"+a.divName+"'>Fooooo</div>")}a.$("#"+a.divName).ready(function(){a.divElem=a.$("#"+a.divName);a.divElem.empty();a.start()})})}};